<main class="register">
  <app-panel-image></app-panel-image>

  <div class="register__panel">
    <a href="/" class="register__logo">
      <h1 class="register__title">
        Playea<span class="register__title-icon">®</span>
      </h1>
    </a>
    <h2 class="register__subtitle">Crear una cuenta</h2>
    <p class="register__text">¿Ya tienes una cuenta? <a href="/login" class="register__link">Iniciar sesión</a></p>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register__form">
      <div class="register__input-group">
        <div class="register__input-wrapper">
          <input
            type="text"
            placeholder="Nombre"
            class="register__input register__input--first-name"
            formControlName="firstName"
            name="firstName"
            [ngClass]="{'register__input--error': firstNameControl?.touched && firstNameControl?.invalid}"
          >
          <p
            class="register__validation-message"
            *ngIf="firstNameControl?.touched && firstNameControl?.invalid"
          >
            {{ getFirstNameErrorMessage() }}
          </p>
        </div>
        <div class="register__input-wrapper">
          <input
            type="text"
            placeholder="Apellido"
            class="register__input register__input--last-name"
            formControlName="lastName"
            name="lastName"
            [ngClass]="{'register__input--error': lastNameControl?.touched && lastNameControl?.invalid}"
          >
          <p
            class="register__validation-message"
            *ngIf="lastNameControl?.touched && lastNameControl?.invalid"
          >
            {{ getLastNameErrorMessage() }}
          </p>
        </div>
      </div>

      <div class="register__input-wrapper">
        <input
          type="email"
          placeholder="Correo electrónico"
          class="register__input register__input--email"
          formControlName="email"
          name="email"
          [ngClass]="{'register__input--error': emailControl?.touched && emailControl?.invalid}"
        >
        <p
          class="register__validation-message"
          *ngIf="emailControl?.touched && emailControl?.invalid"
        >
          {{ getEmailErrorMessage() }}
        </p>
      </div>

      <div class="register__password-wrapper--initial">
        <div class="register__password-wrapper">
          <input
            id="register-password-text"
            [type]="passwordVisible ? 'text' : 'password'"
            placeholder="Ingresa tu contraseña"
            class="register__input register__input--password"
            formControlName="password"
            name="password"
            [ngClass]="{'register__input--error': passwordControl?.touched && passwordControl?.invalid}"
          >
          <button
            type="button"
            class="register__password-toggle"
            (click)="togglePassword()"
          >
            <img
              id="register-toggle-icon"
              [src]="passwordVisible ? '/images/Showing.png' : '/images/NotShowing.png'"
              alt="Toggle Password Visibility"
              class="register__password-icon"
            >
          </button>
        </div>
        <p
          class="register__validation-message"
          *ngIf="passwordControl?.touched && passwordControl?.invalid"
        >
          {{ getPasswordErrorMessage() }}
        </p>
      </div>

      <div class="register__password-wrapper-confirmation">
        <div class="register__password-wrapper">
          <input
            id="register-password-confirmation-text"
            [type]="confirmPasswordVisible ? 'text' : 'password'"
            placeholder="Confirma tu contraseña"
            class="register__input register__input--password"
            formControlName="confirmPassword"
            [ngClass]="{'register__input--error': confirmPasswordControl?.touched && (confirmPasswordControl?.invalid || registerForm.hasError('mismatch'))}"
          >
          <button
            type="button"
            class="register__password-toggle"
            (click)="toggleConfirmationPassword()"
          >
            <img
              id="confirmation-toggle-icon"
              [src]="confirmPasswordVisible ? '/images/Showing.png' : '/images/NotShowing.png'"
              alt="Toggle Password Visibility"
              class="register__password-icon"
            >
          </button>
        </div>
        <p
          class="register__validation-message"
          *ngIf="confirmPasswordControl?.touched && (confirmPasswordControl?.invalid || registerForm.hasError('mismatch'))"
        >
          {{ getConfirmPasswordErrorMessage() }}
        </p>
      </div>

      <div class="register__checkbox-group">
        <input
          type="checkbox"
          id="terms"
          class="register__checkbox"
          formControlName="terms"
        >
        <label for="terms" class="register__terms-label">
          Acepto los <a href="#" class="register__terms-link">Términos y Condiciones</a>
        </label>
      </div>
      <p
        class="register__validation-message"
        *ngIf="termsControl?.touched && termsControl?.invalid"
      >
        {{ getTermsErrorMessage() }}
      </p>

      <button
        type="submit"
        class="register__button"
        [disabled]="registerForm.invalid"
      >
        Crear cuenta
      </button>

      <div class="register__divider">
        <span class="register__or-text">O regístrate con</span>
      </div>

      <app-social-buttons></app-social-buttons>
    </form>
  </div>
</main>
