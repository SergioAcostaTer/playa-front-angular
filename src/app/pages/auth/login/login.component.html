<main class="login">
  <app-panel-image></app-panel-image>

  <div class="login__panel login__panel--right">
    <a href="/" class="login__logo">
      <h1 class="login__title">
        Playea<span class="login__title-icon">®</span>
      </h1>
    </a>
    <h2 class="login__subtitle">Iniciar sesión</h2>
    <p class="login__text">
      ¿No tienes una cuenta? <a href="/auth/register" class="login__link">Regístrate</a>
    </p>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login__form">
      <div class="login__input-wrapper">
        <input
          type="email"
          placeholder="Correo electrónico"
          class="login__input login__input--email"
          formControlName="email"
          name="email"
          [ngClass]="{
            'login__input--error': loginForm.get('email')?.touched && loginForm.get('email')?.invalid,
            'login__input--valid': loginForm.get('email')?.touched && loginForm.get('email')?.valid
          }"
        >
        @if (isRequired('email')) {
          <p class="login__validation-message">Este campo es requerido</p>
        }
        @if (hasEmailError()) {
          <p class="login__validation-message">El correo electrónico no es válido</p> 
        }
      </div>

      <div class="login__password-wrapper">
        <div class="login__password-container"
          [ngClass]="{
            'login__input--error': loginForm.get('password')?.touched && loginForm.get('password')?.invalid,
            'login__input--valid': loginForm.get('password')?.touched && loginForm.get('password')?.valid
          }"
        >
          <input
            id="login-password-text"
            [type]="passwordVisible ? 'text' : 'password'"
            placeholder="Contraseña"
            class="login__input login__input--password"
            formControlName="password"
            name="password"
          >
          <button
            type="button"
            class="login__password-toggle"
            (click)="togglePassword()"
          >
            <img
              id="login-toggle-icon"
              [src]="passwordVisible ? '/images/Showing.png' : '/images/NotShowing.png'"
              alt="Toggle Password Visibility"
              class="login__password-icon"
            >
          </button>
        </div>
        <div class="login__validation-messages">
          @if (isRequired('password')) {
            <p class="login__validation-message">Este campo es requerido</p>
          }
        </div>
      </div>

      <a class="login__forgot-link" href="/auth/forgot-password">¿Olvidaste tu contraseña?</a>

      <button
        type="submit"
        class="login__submit"
        [disabled]="loginForm.invalid"
      >
        Iniciar sesión
      </button>

      <div class="login__divider">
        <span class="login__divider-text">O continúa con</span>
      </div>

      <app-social-buttons></app-social-buttons>
    </form>
  </div>
</main>