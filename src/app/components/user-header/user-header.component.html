<!-- user-header.component.html -->
<div class="header-content">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-wrapper">
    <div class="spinner"></div>
    <span class="loading-text">Loading profile...</span>
  </div>

  <!-- Content State (only shown when not loading) -->
  <div *ngIf="!isLoading && user" class="header-content-wrapper">
    <!-- Authenticated User State -->
    <div *ngIf="user" class="user-section">
      <div class="user-profile-wrapper" (click)="toggleDropdown()">
        <div class="avatar-container">
          <img [src]="getAvatarUrl()" alt="{{ user.username }}'s avatar" class="avatar-image" loading="lazy"
            (error)="onImageError($event)">
        </div>
        <div class="user-info">
          <span class="user-name">{{ user.username }}</span>
          <span class="user-status">Online</span>
        </div>
      </div>

      <!-- Dropdown Menu -->
      <div *ngIf="isDropdownOpen" class="dropdown-menu">
        <a routerLink="/profile" class="dropdown-item">Perfil</a>
        <a href="#" class="dropdown-item">Settings</a>
        <a href="#" class="dropdown-item" (click)="logout()">Cerrar Sesi√≥n</a> <!-- Logout link updated -->
      </div>
    </div>

    <!-- Unauthenticated State -->
    <nav *ngIf="(!user && !isLoading)" class="auth-navigation">
      <a routerLink="/login" class="auth-btn auth-btn--login" title="Sign in to your account">
        Sign In
      </a>
      <a routerLink="/register" class="auth-btn auth-btn--register" title="Create a new account">
        Register
      </a>
    </nav>
  </div>
</div>
